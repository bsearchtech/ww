:ruby
  title = "#{store.size} requests - Stumb, stub and show requests."
!!!
%html
  %head
    %title&= title
    %script{:src=>"http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js"}
    %style{:type=>"text/css"}
      :sass
        body
          width: 80%
          margin: auto

        h1
          font-size: 10px

        div.stump
          font-size: 10px
          border: 1px solid silver
          padding: 0 1em

          h2
            font-size: 10px
            color: gray

            span.method, span.path
              font-size: 16px
              font-weight: normal
              font-family: 'Courier', monospace

            span.method
              color: #090

            span.path
              color: black

            span.time, span.source
              color: blue

          h3
            font-size: small
            border-bottom: 1px solid green
            background: #cfb
            padding: 2px 0 0 2px

          .headers table, div.body pre
            border: 1px dashed green
            margin: 1em
            padding: 1em

          div.body pre
            overflow: auto
            font-size: 12px
  %body
    %h1&= title
    - store.each do |stamp|
      %div.stump{:id => stamp.object_id}
        %h2
          %span.method&= stamp.request.request_method
          %span.path&= stamp.request.fullpath
          on
          %span.time&= stamp.time.iso8601
          from
          %span.source&= stamp.request.ip
        %div
          .headers
            %h3 Headers
            %table
              - stamp.request.env.each do |k,v|
                - next if k =~ /\A[a-z]/
                %tr
                  %th&= k
                  %td&= v

          - unless stamp.request.get?
            .body
              %h3 Body
              %pre&= stamp.body.gsub(/(?:\r)?\n/, "\r\n")

:javascript
  jQuery(function(){
    $("div.stump .headers h3").click(function(){ $(this).next("table").toggle() });
    $("div.stump .body h3").click(function(){ $(this).next("pre").toggle() });
    $("div.stump .headers table").hide();
    $("div.stump .body pre").hide();
  });
